<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>PROFIT MAKER | ULTRA AI v6.0</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800&family=Rajdhani:wght@400;600&family=Share+Tech+Mono&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#000508; --panel:rgba(5,12,20,.95);
  --green:#00ff88; --red:#ff0040; --blue:#00ccff;
  --yellow:#ffd700; --txt:#c0e0ff;
  --mono:'Share Tech Mono', monospace; --head:'Orbitron', sans-serif;
}
*{margin:0;padding:0;box-sizing:border-box}
body{
  background:radial-gradient(800px 400px at 50% 0%,rgba(0,204,255,.12),transparent 60%),var(--bg);
  color:var(--txt); font-family:Rajdhani; height:100vh; overflow:hidden;
}
.container{max-width:550px;margin:auto;padding:14px;height:100vh;display:flex;flex-direction:column;position:relative;z-index:2}

/* FX */
.fx{position:fixed;inset:0;pointer-events:none;opacity:0;z-index:1}
.fx.win{background:radial-gradient(circle at 50% 90%, rgba(0,255,136,.7), transparent 70%);animation:fire 1.1s infinite alternate}
.fx.loss{background:radial-gradient(circle at 50% 50%, rgba(255,0,64,.7), transparent 60%);animation:blast .6s ease-out infinite}
@keyframes fire{from{filter:blur(8px)}to{filter:blur(14px) brightness(1.4)}}
@keyframes blast{from{transform:scale(1);opacity:.9}to{transform:scale(1.4);opacity:0}}

.header{text-align:center;border-bottom:1px solid rgba(0,255,136,.2);padding-bottom:8px}
.header h1{
  font-family:var(--head);
  background:linear-gradient(90deg,var(--green),var(--blue));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}
.badge{font-size:11px;font-family:var(--mono);color:var(--green)}
.timer{font-family:var(--mono);color:var(--yellow);font-size:13px;margin-top:4px}

.target-box{margin:10px 0;padding:8px;text-align:center;border:1px solid var(--green);border-radius:6px;font-family:var(--mono)}
.target-box select{background:#000;color:var(--yellow);border:1px solid var(--yellow);padding:6px 10px;border-radius:4px}

.card{background:var(--panel);border:1px solid rgba(0,204,255,.3);border-radius:8px;padding:14px}
.row{display:flex;justify-content:space-between;font-family:var(--mono);color:var(--yellow)}
.wallet{border:1px solid var(--yellow);padding:4px 10px;border-radius:20px}
.pred{text-align:center;margin:16px 0}
.pred span{font-family:var(--head);font-size:52px}

.stats{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px}
.stat{background:rgba(255,255,255,.05);padding:8px;text-align:center;font-family:var(--mono)}
.stat b{color:var(--yellow)}

#status.win{color:#00ff88;text-shadow:0 0 12px #00ff88}
#status.loss{color:#ff0040;text-shadow:0 0 12px #ff0040}

.history{margin-top:10px;flex:1;overflow-y:auto;background:var(--panel);border-radius:8px;padding:10px}
.hist-row{display:flex;justify-content:space-between;font-family:var(--mono);font-size:12px;padding:6px 0;border-bottom:1px solid rgba(255,255,255,.06)}
.hist-row.win{color:#00ff88;text-shadow:0 0 8px #00ff88}
.hist-row.loss{color:#ff0040;text-shadow:0 0 8px #ff0040}
</style>
</head>

<body>

<div class="fx win" id="fxWin"></div>
<div class="fx loss" id="fxLoss"></div>

<div class="container">
  <div class="header">
    <h1>PROFIT MAKER</h1>
    <div class="badge">AI CORE v6.0 • LIVE FIXED</div>
    <div class="timer">NEXT IN <span id="countdown">60.0</span>s</div>
  </div>

  <div class="target-box">
    TARGET :
    <select id="targetSelect">
      <option value="">SELECT TARGET</option>
      <option value="100">₹100 → ₹500</option>
      <option value="300">₹300 → ₹1500</option>
      <option value="500">₹500 → ₹2500</option>
      <option value="800">₹800 → ₹3500</option>
      <option value="1200">₹1200 → ₹8000</option>
    </select>
  </div>

  <div class="card">
    <div class="row">
      <span>PERIOD: <span id="period">----</span></span>
      <div class="wallet">₹<span id="balance">0</span></div>
    </div>

    <div class="pred"><span id="prediction">WAIT</span></div>

    <div class="stats">
      <div class="stat">LEVEL<br><b id="level">1</b></div>
      <div class="stat">BET<br><b id="betAmount">₹0</b></div>
      <div class="stat">STATUS<br><b id="status">WAIT</b></div>
    </div>
  </div>

  <div class="history" id="historyList"></div>
</div>

<script>
const API="https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json";

const STATE={
  balance:0,
  level:1,
  lastIssue:null,
  pending:null
};

let tickStart=performance.now();

/* ===== TIMER (NO DRIFT) ===== */
function timerLoop(){
  const left=Math.max(0,60-(performance.now()-tickStart)/1000);
  countdown.textContent=left.toFixed(1);
  requestAnimationFrame(timerLoop);
}
timerLoop();

/* ===== UTILS ===== */
function sideOf(n){return n>=5?"BIG":"SMALL"}
function colorOf(n){
  if(n===0||n===5) return "VIOLET";
  if([1,3,7,9].includes(n)) return "GREEN";
  return "RED";
}

/* ===== TARGET ===== */
targetSelect.onchange=e=>{
  STATE.balance=parseInt(e.target.value||0);
  STATE.level=1;
  balance.textContent=STATE.balance;
  level.textContent=1;
  betAmount.textContent="₹"+calcBet();
};

function calcBet(){
  if(STATE.level===1) return Math.floor(STATE.balance*0.15);
  if(STATE.level===2) return Math.floor(STATE.balance*0.30);
  return Math.floor(STATE.balance*0.50);
}

/* ===== HISTORY ===== */
function addHistory(p,pick,bet,won){
  const d=document.createElement("div");
  d.className="hist-row "+(won?"win":"loss");
  d.innerHTML=`<span>${p}</span><span>${pick}</span><span>₹${bet}</span><span>${won?"WIN":"LOSS"}</span>`;
  historyList.prepend(d);
}

/* ===== PREDICTION ===== */
function generatePrediction(list){
  const nums=list.slice(0,20).map(x=>x.number);
  const sides=nums.map(sideOf);
  let big=sides.filter(x=>x==="BIG").length;
  let small=sides.length-big;

  let streak=1;
  for(let i=1;i<sides.length;i++){
    if(sides[i]===sides[0]) streak++;
    else break;
  }
  if(streak>=4) return sides[0]==="BIG"?"SMALL":"BIG";
  return big>small?"SMALL":"BIG";
}

/* ===== MAIN LOOP ===== */
async function gameLoop(){
  const r=await fetch(API);
  const j=await r.json();
  const list=j?.data?.list;
  if(!list||list.length<2) return;

  const current=list[0];
  const closed=list[1];

  period.textContent=(BigInt(current.issueNumber)+1n).toString().slice(-4);

  if(STATE.lastIssue!==current.issueNumber){
    tickStart=performance.now();

    /* ✅ RESOLVE PREVIOUS BET */
    if(STATE.pending){
      const win =
        STATE.pending.pick===sideOf(closed.number) ||
        STATE.pending.pick===colorOf(closed.number);

      if(win){
        STATE.balance+=STATE.pending.bet;
        STATE.level=1;
        status.textContent="WIN";
        status.className="win";
        fxWin.style.opacity=1; setTimeout(()=>fxWin.style.opacity=0,1000);
      }else{
        STATE.balance-=STATE.pending.bet;
        STATE.level=Math.min(STATE.level+1,3);
        status.textContent="LOSS";
        status.className="loss";
        fxLoss.style.opacity=1; setTimeout(()=>fxLoss.style.opacity=0,800);
      }
      balance.textContent=Math.floor(STATE.balance);
      addHistory(closed.issueNumber.slice(-4),STATE.pending.pick,STATE.pending.bet,win);
    }

    /* ✅ SET NEW PREDICTION */
    STATE.lastIssue=current.issueNumber;
    const pick=generatePrediction(list);
    const bet=calcBet();
    STATE.pending={pick,bet};

    prediction.textContent=pick;
    betAmount.textContent="₹"+bet;
    level.textContent=STATE.level;
  }
}

setInterval(gameLoop,2000);
gameLoop();
</script>

</body>
</html>
